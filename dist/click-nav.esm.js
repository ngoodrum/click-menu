/* ClickNav - v0.1.0
* Copyright (c) 2020 [object Object]. Licensed MIT */
var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=function(e){return e&&e.Math==Math&&e},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")(),o=function(e){try{return!!e()}catch(e){return!0}},i=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),a={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,u={f:c&&!a.call({1:2},1)?function(e){var t=c(this,e);return!!t&&t.enumerable}:a},l=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},f={}.toString,s=function(e){return f.call(e).slice(8,-1)},p="".split,d=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?p.call(e,""):Object(e)}:Object,v=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},h=function(e){return d(v(e))},y=function(e){return"object"==typeof e?null!==e:"function"==typeof e},m=function(e,t){if(!y(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!y(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!y(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!y(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},g={}.hasOwnProperty,b=function(e,t){return g.call(e,t)},E=r.document,S=y(E)&&y(E.createElement),w=!i&&!o((function(){return 7!=Object.defineProperty((e="div",S?E.createElement(e):{}),"a",{get:function(){return 7}}).a;var e})),O=Object.getOwnPropertyDescriptor,x={f:i?O:function(e,t){if(e=h(e),t=m(t,!0),w)try{return O(e,t)}catch(e){}if(b(e,t))return l(!u.f.call(e,t),e[t])}},L=function(e){if(!y(e))throw TypeError(String(e)+" is not an object");return e},T=Object.defineProperty,j={f:i?T:function(e,t,n){if(L(e),t=m(t,!0),L(n),w)try{return T(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},A=i?function(e,t,n){return j.f(e,t,l(1,n))}:function(e,t,n){return e[t]=n,e},C=function(e,t){try{A(r,e,t)}catch(n){r[e]=t}return t},M=r["__core-js_shared__"]||C("__core-js_shared__",{}),P=Function.toString;"function"!=typeof M.inspectSource&&(M.inspectSource=function(e){return P.call(e)});var k,_,N,D,I=M.inspectSource,G=r.WeakMap,H="function"==typeof G&&/native code/.test(I(G)),R=t((function(e){(e.exports=function(e,t){return M[e]||(M[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),V=0,F=Math.random(),q=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++V+F).toString(36)},B=R("keys"),z={},W=r.WeakMap;if(H){var K=new W,U=K.get,Y=K.has,J=K.set;k=function(e,t){return J.call(K,e,t),t},_=function(e){return U.call(K,e)||{}},N=function(e){return Y.call(K,e)}}else{var Q=B[D="state"]||(B[D]=q(D));z[Q]=!0,k=function(e,t){return A(e,Q,t),t},_=function(e){return b(e,Q)?e[Q]:{}},N=function(e){return b(e,Q)}}var X,Z,$={set:k,get:_,has:N,enforce:function(e){return N(e)?_(e):k(e,{})},getterFor:function(e){return function(t){var n;if(!y(t)||(n=_(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},ee=t((function(e){var t=$.get,n=$.enforce,o=String(String).split("String");(e.exports=function(e,t,i,a){var c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof t||b(i,"name")||A(i,"name",t),n(i).source=o.join("string"==typeof t?t:"")),e!==r?(c?!l&&e[t]&&(u=!0):delete e[t],u?e[t]=i:A(e,t,i)):u?e[t]=i:C(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||I(this)}))})),te=r,ne=function(e){return"function"==typeof e?e:void 0},re=function(e,t){return arguments.length<2?ne(te[e])||ne(r[e]):te[e]&&te[e][t]||r[e]&&r[e][t]},oe=Math.ceil,ie=Math.floor,ae=function(e){return isNaN(e=+e)?0:(e>0?ie:oe)(e)},ce=Math.min,ue=function(e){return e>0?ce(ae(e),9007199254740991):0},le=Math.max,fe=Math.min,se=function(e){return function(t,n,r){var o,i=h(t),a=ue(i.length),c=function(e,t){var n=ae(e);return n<0?le(n+t,0):fe(n,t)}(r,a);if(e&&n!=n){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((e||c in i)&&i[c]===n)return e||c||0;return!e&&-1}},pe={includes:se(!0),indexOf:se(!1)}.indexOf,de=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),ve={f:Object.getOwnPropertyNames||function(e){return function(e,t){var n,r=h(e),o=0,i=[];for(n in r)!b(z,n)&&b(r,n)&&i.push(n);for(;t.length>o;)b(r,n=t[o++])&&(~pe(i,n)||i.push(n));return i}(e,de)}},he={f:Object.getOwnPropertySymbols},ye=re("Reflect","ownKeys")||function(e){var t=ve.f(L(e)),n=he.f;return n?t.concat(n(e)):t},me=function(e,t){for(var n=ye(t),r=j.f,o=x.f,i=0;i<n.length;i++){var a=n[i];b(e,a)||r(e,a,o(t,a))}},ge=/#|\.prototype\./,be=function(e,t){var n=Se[Ee(e)];return n==Oe||n!=we&&("function"==typeof t?o(t):!!t)},Ee=be.normalize=function(e){return String(e).replace(ge,".").toLowerCase()},Se=be.data={},we=be.NATIVE="N",Oe=be.POLYFILL="P",xe=be,Le=x.f,Te=function(e,t){var n,o,i,a,c,u=e.target,l=e.global,f=e.stat;if(n=l?r:f?r[u]||C(u,{}):(r[u]||{}).prototype)for(o in t){if(a=t[o],i=e.noTargetGet?(c=Le(n,o))&&c.value:n[o],!xe(l?o:u+(f?".":"#")+o,e.forced)&&void 0!==i){if(typeof a==typeof i)continue;me(a,i)}(e.sham||i&&i.sham)&&A(a,"sham",!0),ee(n,o,a,e)}},je=Array.isArray||function(e){return"Array"==s(e)},Ae=function(e){return Object(v(e))},Ce=function(e,t,n){var r=m(t);r in e?j.f(e,r,l(0,n)):e[r]=n},Me=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),Pe=Me&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ke=R("wks"),_e=r.Symbol,Ne=Pe?_e:_e&&_e.withoutSetter||q,De=function(e){return b(ke,e)||(Me&&b(_e,e)?ke[e]=_e[e]:ke[e]=Ne("Symbol."+e)),ke[e]},Ie=De("species"),Ge=function(e,t){var n;return je(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!je(n.prototype)?y(n)&&null===(n=n[Ie])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},He=re("navigator","userAgent")||"",Re=r.process,Ve=Re&&Re.versions,Fe=Ve&&Ve.v8;Fe?Z=(X=Fe.split("."))[0]+X[1]:He&&(!(X=He.match(/Edge\/(\d+)/))||X[1]>=74)&&(X=He.match(/Chrome\/(\d+)/))&&(Z=X[1]);var qe=Z&&+Z,Be=De("species"),ze=function(e){return qe>=51||!o((function(){var t=[];return(t.constructor={})[Be]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},We=De("isConcatSpreadable"),Ke=qe>=51||!o((function(){var e=[];return e[We]=!1,e.concat()[0]!==e})),Ue=ze("concat"),Ye=function(e){if(!y(e))return!1;var t=e[We];return void 0!==t?!!t:je(e)};Te({target:"Array",proto:!0,forced:!Ke||!Ue},{concat:function(e){var t,n,r,o,i,a=Ae(this),c=Ge(a,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?a:arguments[t],Ye(i)){if(u+(o=ue(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,u++)n in i&&Ce(c,u,i[n])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Ce(c,u++,i)}return c.length=u,c}});var Je=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function")}(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},Qe=[].push,Xe=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,i=6==e,a=5==e||i;return function(c,u,l,f){for(var s,p,v=Ae(c),h=d(v),y=Je(u,l,3),m=ue(h.length),g=0,b=f||Ge,E=t?b(c,m):n?b(c,0):void 0;m>g;g++)if((a||g in h)&&(p=y(s=h[g],g,v),e))if(t)E[g]=p;else if(p)switch(e){case 3:return!0;case 5:return s;case 6:return g;case 2:Qe.call(E,s)}else if(o)return!1;return i?-1:r||o?o:E}},Ze={forEach:Xe(0),map:Xe(1),filter:Xe(2),some:Xe(3),every:Xe(4),find:Xe(5),findIndex:Xe(6)},$e=Object.defineProperty,et={},tt=function(e){throw e},nt=function(e,t){if(b(et,e))return et[e];t||(t={});var n=[][e],r=!!b(t,"ACCESSORS")&&t.ACCESSORS,a=b(t,0)?t[0]:tt,c=b(t,1)?t[1]:void 0;return et[e]=!!n&&!o((function(){if(r&&!i)return!0;var e={length:-1};r?$e(e,1,{enumerable:!0,get:tt}):e[1]=1,n.call(e,a,c)}))},rt=Ze.filter,ot=ze("filter"),it=nt("filter");Te({target:"Array",proto:!0,forced:!ot||!it},{filter:function(e){return rt(this,e,arguments.length>1?arguments[1]:void 0)}});var at,ct,ut=Ze.forEach,lt=!!(ct=[]["forEach"])&&o((function(){ct.call(null,at||function(){throw 1},1)})),ft=nt("forEach"),st=lt&&ft?[].forEach:function(e){return ut(this,e,arguments.length>1?arguments[1]:void 0)};Te({target:"Array",proto:!0,forced:[].forEach!=st},{forEach:st});for(var pt in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var dt=r[pt],vt=dt&&dt.prototype;if(vt&&vt.forEach!==st)try{A(vt,"forEach",st)}catch(e){vt.forEach=st}}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){mt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Et(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var St,wt=(St=0,function(e){var t=(e=e||"generatedID-")+St++;return document.getElementById("#"+t)&&(t+=parseInt(1e10*Math.random())),t});Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),function(){if("undefined"!=typeof window)try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var t=function(e,t){var n,r;return(t=t||{}).bubbles=!!t.bubbles,t.cancelable=!!t.cancelable,(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r=n.preventDefault,n.preventDefault=function(){r.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};t.prototype=window.Event.prototype,window.CustomEvent=t}}();var Ot=function(){function e(t){ht(this,e);for(var n={menutype:"dropdown",animationSpeed:400,menuSelector:".cm-nav",toggleSelector:".cm-nav__toggle",linkSelector:".cm-nav__link",htmlClass:"cm-js-menu-active",expanderClass:"cm-nav__expander",expanderText:"expand | collapse",panelActiveClass:"cm-nav__sub-menu--active",landings:!1,expanders:!1,isAutoClose:!0,isRTL:!1},r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];this.config=bt({},n,{},o),this.element=t,console.log(this.config),this.handleExpander=this.handleExpander.bind(this),this.handleMenu=this.handleMenu.bind(this),this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this,t=e.element.querySelectorAll(this.config.linkSelector);e.element.dispatchEvent(new CustomEvent("init",{clickNav:e})),t.forEach((function(t){e.getSiblings(t).forEach((function(n){if(n instanceof HTMLDivElement||n instanceof HTMLOListElement||n instanceof HTMLUListElement){var r=n.getAttribute("id");n.getAttribute("data-type")||n.setAttribute("data-type",e.config.menutype),r||(r=wt("cm-menu-panel-"),n.setAttribute("id",r)),t.setAttribute("data-has-sub",!0);var o=e.createExpander(r,t,e.config.expanderClass);return i=o,(a=t).parentNode.insertBefore(i,a.nextSibling),void o.addEventListener("click",e.handleExpander)}var i,a}))}))}},{key:"destroy",value:function(){var e=this,t=e.element.querySelectorAll("[aria-controls]");e.element.dispatchEvent(new CustomEvent("destroy",{clickNav:e})),t.forEach((function(t){t.removeEventListener("click",e.handleExpander)}))}},{key:"createExpander",value:function(e,t,n){var r=this.config.isExpanders?"":t.innerText,o=document.createElement("template");return o.innerHTML='<button type="button" class="'.concat(n,'" aria-expanded="false" aria-label="').concat(r," ").concat(this.config.expanderText,'" aria-controls="').concat(e,'">').concat(r,"</button>"),o.content.firstElementChild}},{key:"handleExpander",value:function(e){var t=e.currentTarget;this.toggleExpander(t)}},{key:"toggleExpander",value:function(e){var t=this,n=document.getElementById(e.getAttribute("aria-controls"));"true"===e.getAttribute("aria-expanded")?(t.element.dispatchEvent(new CustomEvent("before.expander.close",{clickNav:t})),n.classList.remove(t.config.panelActiveClass),setTimeout((function(){e.setAttribute("aria-expanded",!1),t.element.dispatchEvent(new CustomEvent("after.expander.close",{clickNav:t}))}),t.config.animationSpeed)):(t.element.dispatchEvent(new CustomEvent("before.expander.open",{clickNav:t})),e.setAttribute("aria-expanded",!0),setTimeout((function(){n.classList.add(t.config.panelActiveClass),t.config.isAutoClose&&document.addEventListener("click",t.handleMenu),setTimeout((function(){t.element.dispatchEvent(new CustomEvent("after.expander.open",{clickNav:t}))}),t.config.animationSpeed)}),10))}},{key:"handleMenu",value:function(e){var t=this;console.log("handle menu",t.element.contains(e.target),e.target===t.element,e.target),t.element.contains(e.target)||e.target===t.element||(t.leavingMenu=!0,t.resetExpanders(),document.removeEventListener("click",t.handleMenu),setTimeout((function(){t.leavingMenu=!1}),t.config.animationSpeed))}},{key:"getSiblings",value:function(e){return Et(e.parentNode.children).filter((function(t){return t!==e}))}},{key:"resetExpanders",value:function(){var e=this,t=e.element.querySelectorAll("[aria-expanded=true]");console.log("resetting"),t.forEach((function(t){e.toggleExpander(t)}))}}])&&yt(t.prototype,n),r&&yt(t,r),e}();export default Ot;
